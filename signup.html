<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Create your Hereditas account and start exploring cultural heritage with AI-powered image recognition."
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>Sign Up - Hereditas</title>

    <!-- Favicon  -->
    <link rel="icon" href="assets/img/favicon.png" />

    <!-- ***** All CSS Files ***** -->

    <!-- Style css -->
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body>
    <div class="main">
      <!-- ***** Preloader Start ***** -->
      <div class="preloader-main">
        <div class="preloader-wapper">
          <svg
            class="preloader"
            xmlns="http://www.w3.org/2000/svg"
            version="1.1"
            width="600"
            height="200"
          >
            <defs>
              <filter id="goo" x="-40%" y="-40%" height="200%" width="400%">
                <feGaussianBlur
                  in="SourceGraphic"
                  stdDeviation="10"
                  result="blur"
                />
                <feColorMatrix
                  in="blur"
                  mode="matrix"
                  values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -8"
                  result="goo"
                />
              </filter>
            </defs>
            <g filter="url(#goo)">
              <circle class="dot" cx="50" cy="50" r="25" fill="#203d52" />
              <circle class="dot" cx="50" cy="50" r="25" fill="#203d52" />
            </g>
          </svg>
          <div>
            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>
          </div>
        </div>
      </div>
      <!-- ***** Preloader End ***** -->

      <!-- ***** Header Start ***** -->
      <header id="header">
        <!-- Navbar -->
        <nav
          data-aos="zoom-out"
          data-aos-delay="800"
          class="navbar gameon-navbar navbar-expand"
        >
          <div class="container header">
            <!-- Logo -->
            <a class="navbar-brand" href="index.html#home">
              <img
                src="assets/img/logo/logo.png"
                alt="Brand Logo"
                style="height: 35px"
              />
            </a>

            <div class="ms-auto"></div>

            <!-- Navbar Nav -->
            <ul class="navbar-nav items mx-auto">
              <li class="nav-item">
                <a class="nav-link" href="index.html#home">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="index.html#features">Features</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="index.html#screenshots"
                  >Screenshots</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="index.html#pricing">Pricing</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="index.html#contact">Contact</a>
              </li>
            </ul>

            <!-- Navbar Icons -->
            <ul class="navbar-nav icons"></ul>

            <!-- Navbar Toggler -->
            <ul class="navbar-nav toggle">
              <li class="nav-item">
                <a
                  href="#"
                  class="nav-link"
                  data-bs-toggle="modal"
                  data-bs-target="#menu"
                >
                  <i class="icon-menu m-0"></i>
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- ***** Header End ***** -->

      <!-- ***** Signup Area Start ***** -->
      <section id="home" class="accounts has-overlay overlay-gradient">
        <div class="container">
          <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-6">
              <h1 class="text-white">Create an account!</h1>
              <p class="text-white mt-4">
                Join the Hereditas community today by creating your account.
                Unlock full access to our powerful features and start enhancing
                your cultural exploration right away!
              </p>
            </div>
            <div class="col-12 col-md-5 mt-4 mt-md-0">
              <div class="hero-form">
                <h3 class="mt-0 mb-3">Sign Up</h3>
                <span
                  >Fill all fields so we can get some info about you. We'll
                  never send you spam</span
                >
                <form id="signup-form" class="contact-form mt-3">
                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      name="username"
                      id="username"
                      placeholder="Username"
                      minlength="3"
                      maxlength="15"
                      required
                    />
                    <label for="username">Username</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input
                      type="email"
                      class="form-control"
                      name="email"
                      id="email"
                      placeholder="name@example.com"
                      required
                    />
                    <label for="email">Email address</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input
                      type="password"
                      class="form-control"
                      name="password"
                      id="password"
                      placeholder="Password"
                      required
                    />
                    <label for="password">Password</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input
                      type="password"
                      class="form-control"
                      name="confirmPassword"
                      id="confirmPassword"
                      placeholder="Confirm Password"
                      required
                    />
                    <label for="confirmPassword">Confirm Password</label>
                  </div>
                  <button type="submit" class="btn swap-icon" id="signup-btn">
                    Sign Up<i class="icon bi bi-arrow-right-short"></i>
                  </button>
                  <div class="form-check mt-3">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="exampleCheck1"
                    />
                    <label
                      class="form-check-label form-text mt-0"
                      for="exampleCheck1"
                      >By signing up, you accept our
                      <a href="terms.html">Terms</a> &
                      <a href="privacy.html">Privacy Policy</a></label
                    >
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- ***** Signup Area End ***** -->

      <!--====== Modal Responsive Menu Area Start ======-->
      <div id="menu" class="modal fade p-0">
        <div class="modal-dialog modal-dialog-slideout">
          <div class="modal-content full">
            <div class="modal-header" data-bs-dismiss="modal">
              Menu <i class="icon-close"></i>
            </div>
            <div class="menu modal-body">
              <div class="row w-100">
                <div class="items p-0 col-12 text-center">
                  <!-- Append [navbar] -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--====== Modal Responsive Menu Area End ======-->
    </div>

    <!-- ***** All jQuery Plugins ***** -->

    <!-- jQuery(necessary for all JavaScript plugins) -->
    <script src="assets/js/vendor/jquery.min.js"></script>

    <!-- Bootstrap js -->
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="assets/js/vendor/bootstrap.min.js"></script>

    <!-- Plugins js -->
    <script src="assets/js/vendor/slider.min.js"></script>
    <script src="assets/js/vendor/owl.carousel.min.js"></script>
    <script src="assets/js/vendor/counterup.js"></script>
    <script src="assets/js/vendor/waypoint.js"></script>
    <script src="assets/js/vendor/aos.js"></script>
    <script src="assets/js/vendor/wow.min.js"></script>
    <script src="assets/js/vendor/gallery.min.js"></script>

    <!-- Main js -->
    <script src="assets/js/main.js"></script>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Signup Script -->
    <script>
      // Supabase configuration
      const SUPABASE_URL = "https://ufcyulunatsjcrjbnwmp.supabase.co";
      const SUPABASE_ANON_KEY =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmY3l1bHVuYXRzamNyamJud21wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4OTM5MzcsImV4cCI6MjA3NDQ2OTkzN30.6J9xiaNoKY1UBXtVIPZbrE_dpz4JKZdPDatlhyVNJUM";

      // Initialize Supabase client
      const supabase = window.supabase.createClient(
        SUPABASE_URL,
        SUPABASE_ANON_KEY
      );

      // Form submission handler
      document
        .getElementById("signup-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const signupBtn = document.getElementById("signup-btn");
          const originalText = signupBtn.innerHTML;

          // Get form data
          const username = document.getElementById("username").value;
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;

          // Validate username constraints
          if (username.length < 3) {
            alert("Username must be at least 3 characters long");
            return;
          }

          if (username.length > 15) {
            alert("Username must be no more than 15 characters");
            return;
          }

          // Validate password matching
          if (password !== confirmPassword) {
            alert("Passwords do not match");
            return;
          }

          // Validate checkbox
          const checkbox = document.getElementById("exampleCheck1");
          if (!checkbox.checked) {
            alert("Please accept the Terms and Privacy Policy to continue.");
            return;
          }

          // Show loading state
          signupBtn.innerHTML =
            'Signing Up...<i class="icon bi bi-arrow-right-short"></i>';
          signupBtn.disabled = true;

          try {
            // Sign up with Supabase
            const { data, error } = await supabase.auth.signUp({
              email: email,
              password: password,
              options: {
                data: {
                  username: username,
                },
              },
            });

            if (error) {
              throw error;
            }

            if (data.user) {
              // Success - show confirmation
              alert(
                "Account created successfully! Please check your email to verify your account."
              );

              // Reset form
              document.getElementById("signup-form").reset();
              checkbox.checked = false;

              // Optionally redirect to login or home page
              // window.location.href = 'index.html';
            }
          } catch (error) {
            console.error("Signup error:", error);

            // Check for duplicate username
            if (error.message?.includes("Database error saving new user")) {
              alert(
                "Username Taken: This username is already taken. Please choose a different one."
              );
            } else {
              alert("Error creating account: " + error.message);
            }
          } finally {
            // Reset button state
            signupBtn.innerHTML = originalText;
            signupBtn.disabled = false;
          }
        });
    </script>
  </body>
</html>
